doctype html
html(lang='en')
  head
    meta(http-equiv='Content-Type', content='text/html; charset=UTF-8')
    // Meta, title, CSS, favicons, etc.
    meta(charset='utf-8')
    meta(http-equiv='X-UA-Compatible', content='IE=edge')
    meta(name='viewport', content='width=device-width, initial-scale=1')
    title SIGNEQ
    // Bootstrap
    link(href='/bootstrap/dist/css/bootstrap.min.css', rel='stylesheet')
    // Font Awesome
    link(href='/font-awesome/css/font-awesome.min.css', rel='stylesheet')
    // iCheck
    link(href='../iCheck/skins/flat/green.css', rel='stylesheet')
    // NProgress
    link(href='/nprogress/nprogress.css', rel='stylesheet')
    // Datatable
    link(href='/datatables.net-bs/css/dataTables.bootstrap.min.css', rel='stylesheet')
    // Custom Theme Style
    link(href='/build/css/custom.min.css', rel='stylesheet')
  body.nav-md
    .container.body
      .main_container
        .col-md-3.left_col
          .left_col.scroll-view
            .navbar.nav_title(style='border: 0;')
              a.site_title(href='/secure/listall')
                i.glyphicon.glyphicon-list-alt
                span  S I G N E Q
            .clearfix
            // menu profile quick info
            .profile.clearfix
              .profile_pic
                img.img-circle.profile_img(src='/images/img.jpg', alt='...')
              .profile_info
                h2 #{session.user.companyname}
                span Unidad
              .clearfix
            // /menu profile quick info
            br
            // sidebar menu
            #sidebar-menu.main_menu_side.hidden-print.main_menu
              .menu_section
                h3 General
                ul.nav.side-menu
                  if session.user.t_rol_rolid != 'ROL5'
                    li
                      a
                        i.fa.fa-bar-chart
                        |  Dashboard 
                        span.fa.fa-chevron-down
                      ul.nav.child_menu
                        li
                          a(href='dashboard') Dashboard
                    li
                      a
                        i.fa.fa-edit
                        |  Compromisos 
                        span.fa.fa-chevron-down
                      ul.nav.child_menu
                        li
                          a(href='listall') Mis compromisos
                        li
                          a(href='massive') Carga masiva
                        li
                          a(href='register') Registrar compromiso
                        li
                          a(href='configattrcommit') Configuración de atributos
                    li
                      a
                        i.fa.fa-binoculars
                        |  Monitoreo 
                        span.fa.fa-chevron-down
                      ul.nav.child_menu
                        li
                          a(href='listallmonit') Monitoreo
                        li
                          a(href='massivemonit') Carga masiva
                        li
                          a(href='registermonit') Registrar monitoreo
                        li
                          a(href='configattrmonit') Configuración de atributos

                  if session.user.t_rol_rolid == 'ROL5'
                    li
                      a
                        i.fa.fa-lock
                        |  Administración 
                        span.fa.fa-chevron-down
                      ul.nav.child_menu
                        li
                          a(href='/admin/clients') Clientes
            // /sidebar menu
            // /menu footer buttons
            if session.user.t_rol_rolid != 'ROL5'
              .sidebar-footer.hidden-small
                a(data-toggle='tooltip', data-placement='top', title='Dashboard', href='/secure/dashboard')
                  span.fa.fa-bar-chart(aria-hidden='true')
                a(data-toggle='tooltip', data-placement='top', title='Compromisos', href='/secure/listall')
                  span.fa.fa-edit(aria-hidden='true')
                a(data-toggle='tooltip', data-placement='top', title='Monitoreo', href='/secure/listallmonit')
                  span.fa.fa-binoculars(aria-hidden='true')
                a(data-toggle='tooltip', data-placement='top', title='Logout', href='javascript:logout()')
                  span.glyphicon.glyphicon-off(aria-hidden='true')
            // /menu footer buttons
        // top navigation
        .top_nav
          .nav_menu
            nav
              .nav.toggle
                a#menu_toggle
                  i.fa.fa-bars
              ul.nav.navbar-nav.navbar-right
                li
                  a.user-profile.dropdown-toggle(href='javascript:;', data-toggle='dropdown', aria-expanded='false')
                    img(src='/images/img.jpg', alt='')
                    | #{session.user.name} 
                    span.fa.fa-angle-down
                  ul.dropdown-menu.dropdown-usermenu.pull-right
                    li
                      a(href='javascript:logout()')
                        i.fa.fa-sign-out.pull-right
                        |  Log Out
        // /top navigation
        // page content
        .right_col(role='main')
          block container
        // /page content
        // footer content
        footer
          .pull-right
            | Plataforma de Compromisos - Todos los derechos reservados
          .clearfix
        // /footer content
    #confirm_logout.modal.fade(tabindex='-1', role='dialog', data-backdrop='static', data-keyboard='false')
      .modal-dialog.modal-sm(role='document')
        .modal-content
          .modal-header
            //button.close(type='button', data-dismiss='modal', aria-label='Close')
              span(aria-hidden='true') &times;
            h4.modal-title Cerrar Sesión
          .modal-body
            center
              p ¿Continuar con el cierre de sesión?
          .modal-footer
            button.btn.btn-default(type='button', data-dismiss='modal') Cancelar
            |  
            a.btn.btn-dark(href='logout') Continuar
    //Configuración inicial
    #config_init.modal.fade(tabindex='-1', role='dialog', data-backdrop='static', data-keyboard='false')
      .modal-dialog.modal-lg(role='document')
        .modal-content
          .modal-header
            center 
              h4.modal-title Configuración de compromisos y monitoreo
          .modal-body
            #wizard.form_wizard.wizard_horizontal
              ul.wizard_steps(style='padding: 0px')
                li(style='width:25%')
                  a(href='#step-1')
                    span.step_no 1
                    span.step_descr
                      | Paso 1
                      br
                      small Encabezados
                li(style='width:25%')
                  a(href='#step-2')
                    span.step_no 2
                    span.step_descr
                      | Paso 2
                      br
                      small Dashboard de inicio
                li(style='width:25%')
                  a(href='#step-3')
                    span.step_no 3
                    span.step_descr
                      | Paso 3
                      br
                      small Configuración de tabla de compromisos
                li(style='width:25%')
                  a(href='#step-4')
                    span.step_no 4
                    span.step_descr
                      | Paso 4
                      br
                      small Configuración de tabla de monitoreo
              form#frmWizard.form-horizontal.form-label-left(action='/secure/initConfig', method='post')
                #step-1(style='height:100px')
                  .form-group
                    label.control-label.col-md-3.col-sm-3.col-xs-12(for='razonsocial')
                      | Razón Social 
                    .col-md-6.col-sm-6.col-xs-12
                      input#razonsocial.form-control.col-md-7.col-xs-12(type='text', required='required', name='razonsocial')
                  .form-group
                    label.control-label.col-md-3.col-sm-3.col-xs-12(for='unidadruc')
                      | Unidad 
                    .col-md-6.col-sm-6.col-xs-12
                      input#unidadinit.form-control.col-md-7.col-xs-12(type='text', required='required', name='unidadinit')
                      br
                      br
                      input#multiunidad.flat(type='checkbox', value='Multiunidad', name='multiunidad')
                      label(for='multiunidad') Varias Unidades
                  .form-group
                    label.control-label.col-md-3.col-sm-3.col-xs-12(for='proyoper') Proyecto u Operación
                    .col-md-6.col-sm-6.col-xs-12
                      input#proyoper.form-control.col-md-7.col-xs-12(type='text', name='proyoper')
                      br
                      br
                      input#multiproyoper.flat(type='checkbox', value='Multiproyecto', name='multiproyoper')
                      label(for='multiproyoper') Varias proyectos u operaciones
                #step-2(style='height:auto')
                  center
                    table#datatable-responsive.table.dt-responsive.nowrap(cellspacing='0', width='80%')
                      tr
                        td(width='40%')
                          label(for='total') Total Compromisos
                        td(width='10%')
                          input#total.flat(type='checkbox', value='DB01', name='dashboard')
                        td(width='40%') 
                          label(for='incumplidos') Compromisos incumplidos con un plan de acción
                        td(width='10%')
                          input#incumplidos.flat(type='checkbox', value='DB06', name='dashboard')
                      tr
                        td(width='40%')
                          label(for='accion') Compromisos que requieren acción
                        td(width='10%')
                          input#accion.flat(type='checkbox', value='DB02', name='dashboard')
                        td(width='40%') 
                          label(for='sinaccion') Compromisos sin un plan de acción
                        td(width='10%')
                          input#sinaccion.flat(type='checkbox', value='DB07', name='dashboard')
                      tr
                        td(width='40%')
                          label(for='cumplimiento') Compromisos en cumplimiento
                        td(width='10%')
                          input#accion.flat(type='checkbox', value='DB03', name='dashboard')
                        td(width='40%') 
                          label(for='incumplidoscrit') Compromisos críticos incumplidos
                        td(width='10%')
                          input#sinaccion.flat(type='checkbox', value='DB08', name='dashboard')
                      tr
                        td(width='40%')
                          label(for='sustento') Compromisos en cumplimiento con sustento
                        td(width='10%')
                          input#accion.flat(type='checkbox', value='DB04', name='dashboard')
                        td(width='40%') 
                          label(for='nodefinidos') Compromisos con aspectos no definidos
                        td(width='10%')
                          input#sinaccion.flat(type='checkbox', value='DB09', name='dashboard')
                      tr
                        td(width='40%')
                          label(for='incumplidos') Compromisos incumplidos
                        td(width='10%')
                          input#accion.flat(type='checkbox', value='DB05', name='dashboard')
                        td(width='40%') 
                          label(for='redefinir') Compromisos que requieren ser definidos
                        td(width='10%')
                          input#sinaccion.flat(type='checkbox', value='DB10', name='dashboard')
                #step-3(style='height:auto')
                  center
                    table#datatable-responsive.table.dt-responsive.nowrap(cellspacing='0', width='80%')
                      tr
                        td(width='40%')
                          label(for='correlativo') Número correlativo
                        td(width='10%')
                          input#correlativo.flat(type='checkbox', value='CM01', name='compromisos')
                        td(width='40%') 
                          label(for='asociado') Aspecto asociado
                        td(width='10%')
                          input#asociado.flat(type='checkbox', value='CM13', name='compromisos')
                      tr
                        td(width='40%')
                          label(for='global') Código global
                        td(width='10%')
                          input#global.flat(type='checkbox', value='CM02', name='compromisos')
                        td(width='40%') 
                          label(for='accion') Compromisos que requieren acción
                        td(width='10%')
                          input#accion.flat(type='checkbox', value='CM14', name='compromisos')
                      tr
                        td(width='40%')
                          label(for='unidad') Unidad
                        td(width='10%')
                          input#unidad.flat(type='checkbox', value='CM03', name='compromisos')
                        td(width='40%') 
                          label(for='instcomp') Instalación/componente
                        td(width='10%')
                          input#instcomp.flat(type='checkbox', value='CM15', name='compromisos')
                      tr
                        td(width='40%')
                          label(for='proyopercom') Proyecto u operación
                        td(width='10%')
                          input#proyopercom.flat(type='checkbox', value='CM04', name='compromisos')
                        td(width='40%') 
                          label(for='recurrente') Compromiso recurrente
                        td(width='10%')
                          input#recurrente.flat(type='checkbox', value='CM16', name='compromisos')
                      tr
                        td(width='40%')
                          label(for='origen') Origen del compromiso
                        td(width='10%')
                          input#origen.flat(type='checkbox', value='CM05', name='compromisos')
                        td(width='40%') 
                          label(for='responsable') Área responsable
                        td(width='10%')
                          input#responsable.flat(type='checkbox', value='CM17', name='compromisos')
                      tr
                        td(width='40%')
                          label(for='capsecpa') Capítulo, sección y página
                        td(width='10%')
                          input#capsecpa.flat(type='checkbox', value='CM68', name='compromisos')
                        td(width='40%') 
                          label(for='criticidad') Criticidad
                        td(width='10%')
                          input#criticidad.flat(type='checkbox', value='CM18', name='compromisos')                            
                      tr
                        td(width='40%')
                          label(for='textolit') Texto literal
                        td(width='10%')
                          input#textolit.flat(type='checkbox', value='CM09', name='compromisos')
                        td(width='40%') 
                          label(for='estadocump') Estado de cumplimiento
                        td(width='10%')
                          input#estadocump.flat(type='checkbox', value='CM19', name='compromisos')                            
                      tr
                        td(width='40%')
                          label(for='resumen') Resumen del compromiso
                        td(width='10%')
                          input#resumen.flat(type='checkbox', value='CM10', name='compromisos')
                        td(width='40%') 
                          label(for='formacum') Forma de cumplimiento
                        td(width='10%')
                          input#formacum.flat(type='checkbox', value='CM20', name='compromisos')                            
                      tr
                        td(width='40%')
                          label(for='temporalidadcom') Temporalidad
                        td(width='10%')
                          input#temporalidadcom.flat(type='checkbox', value='CM11', name='compromisos')
                        td(width='40%') 
                          label(for='evidencia') Evidencia de compromiso
                        td(width='10%')
                          input#evidencia.flat(type='checkbox', value='CM21', name='compromisos')                            
                      tr
                        td(width='40%')
                          label(for='frecuencia') Frecuencia
                        td(width='10%')
                          input#frecuencia.flat(type='checkbox', value='CM12', name='compromisos')
                        td(width='40%') 
                          label(for='frecuenciaverif') Frecuencia de verificación
                        td(width='10%')
                          input#frecuenciaverif.flat(type='checkbox', value='CM22', name='compromisos')                            
                      tr
                        td(width='40%')
                          label(for='notas') Notas adicionales
                        td(width='10%')
                          input#notas.flat(type='checkbox', value='CM23', name='compromisos')
                    table#datatable.table.dt-responsive.nowrap(cellspacing='0', width='60%')
                      caption(width='60%' style='text-align:center;') Etapas
                      tr
                        td(width='10%')
                          label(for='contruccion') Contrucción
                        td(width='10%')
                          input#contruccion.flat(type='checkbox', value='CM24', name='etapascompromiso')
                        td(width='10%') 
                          label(for='operacion') Operación
                        td(width='10%')
                          input#operacion.flat(type='checkbox', value='CM25', name='etapascompromiso')
                        td(width='10%') 
                          label(for='cierre') Cierre
                        td(width='10%')
                          input#cierre.flat(type='checkbox', value='CM26', name='etapascompromiso')
                        td(width='10%') 
                          label(for='postcierre') Post-cierre
                        td(width='10%')
                          input#postcierre.flat(type='checkbox', value='CM27', name='etapascompromiso')
                #step-4(style='height:auto')
                  center
                    table#datatable-responsive.table.dt-responsive.nowrap(cellspacing='0', width='80%')
                      tr
                        td(width='40%')
                          label(for='correlativomonit') Número correlativo
                        td(width='10%')
                          input#correlativomonit.flat(type='checkbox', value='MN01', name='monitoreo')
                        td(width='40%') 
                          label(for='temporalidadmonit') Temporalidad
                        td(width='10%')
                          input#temporalidadmonit.flat(type='checkbox', value='MN12', name='monitoreo')
                      tr
                        td(width='40%')
                          label(for='globalmonit') Código global
                        td(width='10%')
                          input#globalmonit.flat(type='checkbox', value='MN24', name='monitoreo')
                        td(width='40%') 
                          label(for='frecuenciamonit') Frecuencia de monitoreo
                        td(width='10%')
                          input#frecuenciamonit.flat(type='checkbox', value='MN13', name='monitoreo')
                      tr
                        td(width='40%')
                          label(for='unidadmonit') Unidad
                        td(width='10%')
                          input#unidadmonit.flat(type='checkbox', value='MN02', name='monitoreo')
                        td(width='40%') 
                          label(for='frecuenciarep') Frecuencia de reporte
                        td(width='10%')
                          input#frecuenciarep.flat(type='checkbox', value='MN14', name='monitoreo')
                      tr
                        td(width='40%')
                          label(for='proyopermonit') Proyecto u operación
                        td(width='10%')
                          input#proyopermonit.flat(type='checkbox', value='MN03', name='monitoreo')
                        td(width='40%') 
                          label(for='autoridad') Autoridad a reportar
                        td(width='10%')
                          input#autoridad.flat(type='checkbox', value='MN15', name='monitoreo')
                      tr
                        td(width='40%')
                          label(for='origenmonit') Origen del documento
                        td(width='10%')
                          input#origenmonit.flat(type='checkbox', value='MN04', name='monitoreo')
                        td(width='40%') 
                          label(for='responsablemonit') Área responsable
                        td(width='10%')
                          input#responsablemonit.flat(type='checkbox', value='MN16', name='monitoreo')
                      tr
                        td(width='40%')
                          label(for='capsecpamonit') Capítulo, sección y página
                        td(width='10%')
                          input#capsecpamonit.flat(type='checkbox', value='MN57', name='monitoreo')
                        td(width='40%') 
                          label(for='reportemonit') Reportes de monitoreo
                        td(width='10%')
                          input#reportemonit.flat(type='checkbox', value='MN17', name='monitoreo')                            
                      tr
                        td(width='40%')
                          label(for='componentemonit') Componente
                        td(width='10%')
                          input#componentemonit.flat(type='checkbox', value='MN08', name='monitoreo')
                        td(width='40%') 
                          label(for='frecuenciaverifmonit') Frecuencia de verificación
                        td(width='10%')
                          input#frecuenciaverifmonit.flat(type='checkbox', value='MN18', name='monitoreo')                            
                      tr
                        td(width='40%')
                          label(for='estacionmonit') Estación
                        td(width='10%')
                          input#estacionmonit.flat(type='checkbox', value='MN09', name='monitoreo')
                        td(width='40%') 
                          label(for='notasmonit') Notas
                        td(width='10%')
                          input#notasmonit.flat(type='checkbox', value='MN19', name='monitoreo')                            
                      tr
                        td(width='40%')
                          label(for='parammonit') Parámetros
                        td(width='10%')
                          input#parammonit.flat(type='checkbox', value='MN10', name='monitoreo')
                        td(width='40%') 
                          label(for='metodologia') Metodología
                        td(width='10%')
                          input#metodologia.flat(type='checkbox', value='MN11', name='monitoreo')                            
                    table#datatable.table.dt-responsive.nowrap(cellspacing='0', width='60%')
                      caption(width='60%' style='text-align:center;') Etapas
                      tr
                        td(width='10%')
                          label(for='contruccion') Contrucción
                        td(width='10%')
                          input#contruccion.flat(type='checkbox', value='MN20', name='etapasmonitoreo')
                        td(width='10%') 
                          label(for='operacion') Operación
                        td(width='10%')
                          input#operacion.flat(type='checkbox', value='MN21', name='etapasmonitoreo')
                        td(width='10%') 
                          label(for='cierre') Cierre
                        td(width='10%')
                          input#cierre.flat(type='checkbox', value='MN22', name='etapasmonitoreo')
                        td(width='10%') 
                          label(for='postcierre') Post-cierre
                        td(width='10%')
                          input#postcierre.flat(type='checkbox', value='MN23', name='etapasmonitoreo')

            // End SmartWizard Content 
    // jQuery
    script(src='/jquery/dist/jquery.min.js')
    // Bootstrap
    script(src='/bootstrap/dist/js/bootstrap.min.js')
    // NProgress
    script(src='/nprogress/nprogress.js')
    script(src='/moment/min/moment.min.js')
    script(src='/bootstrap-progressbar/bootstrap-progressbar.min.js')
    // FastClick
    script(src='/fastclick/lib/fastclick.js')
    // jQuery Smart Wizard
    script(src='/jQuery-Smart-Wizard/js/jquery.smartWizard.js')    
    // Custom Theme Scripts
    script(src='/iCheck/icheck.min.js')
    script(src='https://cdn.jsdelivr.net/jquery.validation/1.16.0/jquery.validate.min.js')
    //Datatable
    script(src='/datatables.net/js/jquery.dataTables.min.js')
    script(src='/datatables.net-bs/js/dataTables.bootstrap.min.js')
    script(src='/build/js/custom.min.js')
    script(src='/compromisos/admin.js')
    script.
      $(document).ready(function(){
        var firsttime = '#{session.user.firsttime}';
        if (firsttime == 1) {
          $('#config_init').modal('show');
          /*$('#config_init').on('show', function () {
            $(this).find('.modal-body').css({
              //width:'auto', //probably not needed
              height:'auto', //probably not needed 
              'max-height':'100%'
            });
          });*/
        }
      });
      var logout = function() {
        $('#confirm_logout').modal('show');
      }
      var finishWizard = function(){
        //$('#config_init').modal('hide');
        $('#frmWizard').submit();
      }

